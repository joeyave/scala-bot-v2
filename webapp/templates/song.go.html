<!doctype html>
<html lang="en">
{{template "global/header" .}}

<body>

<div class="container">
    <form id="form">
        <div class="mt-2 mb-2">
            <textarea rows='1' type="text" class="header-input w-100" id="name" list="suggestions"
                      placeholder="Название"
                      autocomplete="off" required>{{ .Song.PDF.Name }}</textarea>
            <select class="mb-2" id="tags" multiple>
                {{ range $i, $tag := .Tags }}
                    {{ if $tag.IsSelected}}
                        <option value="{{ $tag.Name }}" selected>{{$tag.Name}}</option>
                    {{else}}
                        <option value="{{ $tag.Name }}">{{$tag.Name}}</option>
                    {{end}}
                {{ end }}
            </select>
            <select id="key">
                {{ range $i, $key := .Keys }}
                    {{ if $key.IsSelected }}
                        <option selected value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ else}}
                        <option value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ end }}
                {{ end }}
            </select>
            <select id="transpose-section" class="visually-hidden" required>
                {{ range $i, $tag := .Sections }}
                    {{ if $tag.IsSelected}}
                        <option value="{{ $tag.Value }}" selected>{{$tag.Name}}</option>
                    {{else}}
                        <option value="{{ $tag.Value }}">{{$tag.Name}}</option>
                    {{end}}
                {{ end }}
            </select>
            <select id="bpm">
                {{ range $i, $key := .BPMs }}
                    {{ if $key.IsSelected }}
                        <option selected value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ else}}
                        <option value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ end }}
                {{ end }}
            </select>
            <select id="time">
                {{ range $i, $key := .Times }}
                    {{ if $key.IsSelected }}
                        <option selected value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ else}}
                        <option value="{{ $key.Value }}">{{ $key.Name }}</option>
                    {{ end }}
                {{ end }}
            </select>
        </div>

        {{/*        <div class="mb-2 d-flex justify-content-end">*/}}
        {{/*            <div class="form-check form-check-inline form-switch">*/}}
        {{/*                <input type="checkbox" class="form-check-input" role="switch" id="showLyrics" checked>*/}}
        {{/*                <label for="scales">Слова</label>*/}}
        {{/*            </div>*/}}
        {{/*            <div class="form-check form-check-inline form-switch">*/}}
        {{/*                <input type="checkbox" class="form-check-input" role="switch" id="showChords" checked>*/}}
        {{/*                <label for="horns">Аккорды</label>*/}}
        {{/*            </div>*/}}
        {{/*        </div>*/}}

        <div id="lyrics-container">
            {{ if eq .Action "create" }}
                <textarea id="lyrics" class="form-control lyrics-input">{{ .Lyrics }}</textarea>
            {{ else }}
                <pre id="lyrics" class="lyrics-div">{{ .Lyrics }}</pre>
            {{ end }}
        </div>
    </form>

</div>

<script type="text/javascript">
    const action = {{ .Action }};

    const lyricsHTML = {{ .Lyrics }};

    const messageId = {{ .MessageID }};
    const chatId = {{ .ChatID }};
    const userId = {{ .UserID }};

    const song = JSON.parse("{{ json .Song }}");
</script>
<script type="module" src="/webapp/assets/js/edit-song.js"></script>
</body>
</html>